<script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
<link rel="import" href="../bower_components/sortable-table/sortable-table.html">

<polymer-element name="remove-button" extends="button" on-click="{{remove_me}}">
    <script>
        Polymer({
            remove_me: function(){this.fire('remove', this);}
        })
    </script>
</polymer-element>

<polymer-element id='myclicktable' name="click-table" on-remove="{{removeit}}" attributes='mydata'>
    <template>
        <sortable-table id='emb' name="click-table-embedded" rowTemplate='row' data={{mydata}}>
          <template id="row">
            <td>
                <button is="remove-button" myprop={{record.row.fruit}}>Remove</button>
            </td>

            <td> {{record.row.fruit}} </td>

            <td> {{record.row.alice}}</td>

            <td> {{record.row.bill}} </td>

            <td> {{record.row.casey}}</td>

          </template>
            <!-- <sortable-column name="fruit" cellTemplate="myevent"></sortable-column>
            <sortable-column name="alice" cellTemplate="myevent"></sortable-column> -->
        </sortable-table>
    </template>
    <script>
    Polymer({
        removeit: function(event, msg){
          console.log(event.path[2].rowIndex);
          console.log(this.mydata)
          this.mydata.splice(event.path[2].rowIndex-1, 1)
        },

        mydata: [{fruit: 'apple', alice: 4, bill: 10, casey: 2 },
        {fruit: 'banana', alice: 0, bill: 4, casey: 0 },
        {fruit: 'grape', alice: 2, bill: 3, casey: 5 },
        {fruit: 'pear', alice: 4, bill: 2, casey: 8 },
        {fruit: 'strawberry', alice: 0, bill: 14, casey: 0 },
        {fruit: 'apple', alice: 5, bill: 6, casey: 4 },
        {fruit: 'banana', alice: 3, bill: 9, casey: 2 },
        {fruit: 'grape', alice: 8, bill: 3, casey: 0 },
        {fruit: 'pear', alice: 0, bill: 7, casey: 4 },
        {fruit: 'strawberry', alice: 4, bill: 5, casey: 2 }
    ]
    });
    </script>
</polymer-element>
<click-table></click-table>
