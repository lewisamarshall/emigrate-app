<div id='constructor-content'>

  <button class='btn btn-default navbar-btn' onclick=window.constructor.update()>Update</button>
  <button class='btn btn-primary navbar-btn' onclick=window.constructor.save()>Save</button>
  <!-- Chart -->
  <div id="constructor_chart" class='chart'></div>
  <!-- Table -->
  <template id="constructor_table" bind>
    <sortable-table class="bootstrap"
                    data="{{data}}"
                    columns="{{columns}}"
                    userSort=true
                    disableColum  nMove=true
                    rowEditorTemplate="editor"
                    >
      <!-- nested table as a cell -->
      <template id="nestedTable">
        <td style="padding:0;">
          <sortable-table class="bootstrap"
                          style="width:100%"
                          data="{{row[column.name]}}"
                          columns="{{column.columns}}"
                          disableColumnMove=true
                          footerTemplate="nestedFooter"
                          rowEditorTemplate="nestedTableEditor">

            <template id="nestedFooter">
              <div horizontal="" layout="" center="">
                  <button type="button"
                          class="btn btn-default"
                          value="{{data}}"
                          >
                      Add Ion
                  </button>
              </div>
            </template>

            <template id="nestedTableEditor">
              <td horizontal layout on-dblclick="{{closeEdit}}">
                <div flex horizontal layout center class="form-group">
                  <input type='text'
                         value="{{record.row.ion}}"
                         class="form-control"
                         on-change="window.constructor.update()">
                </div>
              </td>
              <td>
                <div class="form-group has-success has-feedback">
                  <input type="number"
                         class="form-control"
                         value="{{record.row.concentration}}"
                         step=".001"
                         on-change="window.constructor.update()">
                </div>
              </td>
            </template>

          </sortable-table>
        </td>
      </template>
      <!-- Editor -->
      <template id="editor">
        <td horizontal layout on-dblclick="{{closeEdit}}">
          <div flex horizontal layout center class="form-group">
            <input type='text'
                   value="{{record.row.zone}}"
                   class="form-control"
                   on-change="window.constructor.update()">
          </div>
        </td>
        <td>
          <div class="form-group has-success has-feedback">
            <input type="number"
                   class="form-control"
                   value="{{record.row.length}}"
                   step=".001"
                   on-change="window.constructor.update()">
          </div>
        </td>
        <td>
          <template id="nestedTableEditor">
            <td style="padding:0;">
              <sortable-table class="bootstrap"
                              style="width:100%"
                              data="{{row[column.name]}}"
                              columns="{{column.columns}}"
                              disableColumnMove=true>
              </sortable-table>
            </td>
          </template>
        </td>
      </template>
    </sortable-table>
  </template>
  <button type="button"
          class="btn btn-default"
          onclick=window.constructor.add_zone()>
    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
    Add Zone
  </button>
</div>
